### Python编程

参考：
[廖雪峰的Python教程](https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000)
&emsp;[Vamei's Blog](https://www.cnblogs.com/vamei/archive/2012/09/13/2682778.html)


## Python基础

### Python的起源

---
[Python起源](https://linux.cn/article-3906-1.html)

### Python的基本数据类型和赋值运算语句

---
- `type()`查询数据类型

- 序列(sequence)：
序列是一组有顺序的元素的集合。包含元组和列表，元组中的元素不可变，而列表中的元素可以修改，字符串是元组。

- 运算符
  - 注意`==`和`is`的区别:
  ```python
  a = 'hello world'
  b = 'hello world'
  a == b # 输出True
  a is b # 输出False
  ```
  即`==`是按位做数值判断，`is`是判断是不是同一片内存地址

### Python语法特点

---
Python与C语言明显的不同在于采用4空格的强制缩进来表明隶属关系，使得程序好看，可读性强。

### Python判别与循环语句

---
- if
```python
if ...:
elif ...:
elif ...:
else:
```
- for

`for`循环可以迭代任何可迭代对象

  - 常用
    - range()
    - enumerate()
    - zip()

- while

`continue`和`break`用于控制while循环过程

### 函数

---
- 函数的传参

如果是基本数据类型的参数，变量传递给函数后，函数会在内存中复制一个新的变量，从而不影响原来的变量，称为**值传递**

如果传递的参数是一个表，表实际上是作为指针传递的，指针直接指向内存中的地址，因此函数操作会直接改变原有的变量，称为**指针传递**

在定义或调用参数时，几种传递方式可以混用，顺序的基本原则是，**先位置，再关键字，再包裹位置，再包裹关键字**。

### 面向对象的概念

---
Python使用类和对象来实现面向对象的编程。面向对象最主要的目的是**提高程序的重复使用性**。

- 类
  - 类的初始化
    - `__init__() `:开头结尾两个下划线代表类中的特殊方法，`__init__()`会在类的实例化时直接被调用，也称**初始化**

  - `__init__()`的其他应用：
  ```python
  class Human(object):
      def __init__(self input_gender):
          self.gender = input_gender
      def printGender(self):
          print(self.gender)

  li_lei = Human('male') #这里'male'作为参数传递给__init__()方法的input_gender变量
  print(li_lei.gender)
  li_lei.printGender()
  ```
  这里我们通过`__init__()`给对象增加了一个特有的性质，使得对象`li_lei`拥有了性质`gender`，注意他不是类的属性，而是在实例化之后的对像具有的性质，但此性质也可以通过self被类内的其他函数调用。

- 属性

类的属性用于描述类的共同特征。

- 方法

通过定义内部函数来实现方法：
```python
def func1(self, param):
  ...
  return
```
函数第一个参数必须是self，它表明类的一个对象，拥有类的所有性质，因此可以调用类中的属性和方法（函数）。通过self还可以修改类属性值，但这么做是危险的。

- 类的实例化——对象

对象可以拥有类的所有属性

- 类的继承

通过类定义中传递父类名称来进行继承，如果`class Solution(object)`则说明它上面没有任何父类。

类的继承可以大大减少一些重复定义的情况，所以面向对象的编程提高了程序的重复使用性。

- 总结

Python作为面向对象的语言，Everything is Object.

比如，列表(List)就是一个类，对于特定的类，我们可以通过特殊方法重载运算符，以实现想要的功能。

Python基于面向对象的特点，已经实现了很多有用的类，内建的如list,tuple，外部的如numpy，这些库定义了很多实用的对象。

## Python进阶

善用`help()`和`dir()`帮助函数。

### 字典

---
**字典**也是一个类，但和列表不同的是，它是通过键（不可变对象作为键）来引用对象的，是无序的数据结构。

### I/O

---
- `f = open(文件名，模式)`:创建文件对象
- 文件对象的方法
```python
content = f.read(N) #读取N Bytes的数据
content = f.readline() #读取一行
content = f.readlines() #读取所有行，并储存在列表中

f.write('hello')

f.close() #关闭文件
```

### 模块

---
```python
import a
import a as b
from a import func1
from a import *
```

- 模块的搜索路径
  - 程序所在的文件夹
  - 标准库的安装路径
  - 操作系统环境变量所包含的路径

### 异常处理

---


**位运算**

- 位，字节，字和字长

- 位(bit)，也称比特，是一个二进制数(0或1)
- 字节(Byte)，是计算机数据处理的基本单位，一个字节由八个二进制位，一般用来表示ASCII码对应一个字符；
- 字(word)，长度与架构有关，比如mips指令集中是32位，x86指令集定义word为16位；
- 字长，代表CPU一次能够运算的最大长度，32位计算机的数值范围就是2^32;


- 二进制

- Tips
  - 可以用右移操作代替除2运算，执行效率高
  - 位运算的与，或，异或操作在对数字进行对比判断时很有用

**函数式编程**
  - 高阶函数
    - 把函数作为参数传入，这样的函数称为高阶函数，函数式编程就是指这种高度抽象的编程范式
    - 内建函数
      - map/reduce:注意map接受的是Iterable，并将结果作为Iterator返回
      - filter：用于过滤序列，且返回的也是一个惰性计算序列Iterator.
      - sorted：可以用关键字key实现一个映射函数进行自定义排序
  - 返回函数
    - 函数可以作为返回值，形成闭包，但该函数并未执行，因此需注意不要引用可能发生变化的变量
  - 匿名函数
  - 装饰器
  - 偏函数

**进程和线程**
  - 线程是最小的执行单元，而进程由至少一个线程组成。如何调度进程和线程，完全由操作系统决定
  - 多进程
    - UNIX下可以用fork()进行系统调用
    - multiprocessing是一个跨平台的多进程模块，可以用Process来创建一个子进程，也可以用Pool同时创建多个进程，Pool的默认大小是CPU的核数
    - 子进程的输入输出
    - 进程间的通信是通过Queue、Pipes等实现的
  - 多线程
    - 线程是操作系统直接支持的执行单元，高级语言通常内置对多线程的支持，Python的线程是Posix Thread，而不是模拟的线程
    - 可以利用threading模块创建Thread实例来启动一个线程
    - 一个进程默认启动的线程称为主线程，主线程又可以启动新的线程
    - 多线程&多进程最大的不同在于多线程所有变量由所有线程共享，因此为防止多线程同时更改一个变量，需要threading.Lock()创建锁，同时要防止死锁，这也是多线程的一个复杂的地方
    - Python有全局锁(Global Interpreter Lock)，导致多线程无法同时利用多核
      - 因为Python的线程虽然是真正的线程，但解释器执行代码时，有一个GIL锁：Global Interpreter Lock，任何Python线程执行前，必须先获得GIL锁，然后，每执行100条字节码，解释器就自动释放GIL锁，让别的线程有机会执行。这个GIL全局锁实际上把所有线程的执行代码都给上了锁，所以，多线程在Python中只能交替执行，即使100个线程跑在100核CPU上，也只能用到1个核。
    - ThreadLocal方法
      - ThreadLocal是全局变量，类似字典，每个线程都只能读写自己线程的独立副本（常用于为每个线程绑定特定的数据库连接，身份信息等），解决了参数在一个线程的不同函数之间相互传递的问题

    - 进程VS线程
      - 进程稳定，线程开销小，但不稳定
      - 线程切换
      - 计算密集型/IO密集型
      - 异步IO

**Python的内存管理**

参考：

[Vamei's Blog](http://www.cnblogs.com/vamei/p/3232088.html)

[Python的动态类型](http://www.cnblogs.com/vamei/archive/2012/07/10/2582795.html)

Python作为一种动态类型的语言，与面向过程的语言不同，其对象和引用分离。为了有效释放内存，Python内置了垃圾回收(garbage collection)机制，其采用一种相对简单的引用计数的垃圾回收机制，并需要解决孤立引用环的问题。

- Python的对象和引用

（1）Python的可变对象和不可变对象

  - 不可变对象
    - 该对象所指向的内存中的值不能被改变，比如数值类型，字符串，元组；
  - 可变对象
    - 该对象所指向的内存中的值可以被改变，比如列表，字典，集合；
  
  可变类型传递的是引用，不可变类型传递的是内容。

（2）引用和对象分离
```python
a = 1
a = 'er'
```
Python的对象和引用分离，整数1作为对象，是内存的实体，而a是对象的引用，指向1。且引用随时可以指向一个新的对象。

（3）
```python
a = 5
b = a
a = a + 2
```
第三句实际上是将a这个引用指向了一个新的引用，并不影响b引用的指向。但下面的情况不同：
```python
L1 = [1,2,3]
L2 = L1
L1[0] = 10
print(L2)
```
L2会同时发生变化，因为L1和L2的指向没有发生变化，依然指向同一个表，而表实际上是包含了多个引用的对象（如L1[0],L1[1],...）


**Python的三种拷贝方式**

参考：https://www.cnblogs.com/xueli/p/4952063.html

（1）直接赋值

（2）copy浅拷贝

（3）copy深拷贝

